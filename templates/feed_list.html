{{define "content"}}
<div id="feed-list">
    <div class="columns is-multiline">
        {{range .Feeds}}
        <div class="column is-one-third" id="feed-{{.ID}}">
            <div class="card">
                <div class="card-content">
                    <p class="title is-5">{{.Title}}</p>
                    <p class="subtitle is-6">{{.Description}}</p>
                </div>
                <footer class="card-footer">
                    <a href="/feeds/{{.ID}}/articles" class="card-footer-item">View Articles</a>
                    {{if $.User}}
                        {{if .IsSubscribed}}
                        <a href="#" class="card-footer-item has-text-danger"
                           hx-delete="/feeds/{{.ID}}/subscribe"
                           hx-target="#feed-{{.ID}}"
                           hx-swap="outerHTML">
                            Unsubscribe
                        </a>
                        {{else}}
                        <a href="#" class="card-footer-item has-text-primary"
                           hx-post="/feeds/{{.ID}}/subscribe"
                           hx-target="#feed-{{.ID}}"
                           hx-swap="outerHTML">
                            Subscribe
                        </a>
                        {{end}}
                    {{end}}
                </footer>
            </div>
        </div>
        {{end}}
    </div>

    <div class="pagination is-centered" role="navigation" aria-label="pagination">
        <a class="pagination-previous" 
           {{if le .CurrentPage 1}}disabled{{end}}
           hx-get="/feeds?page={{subtract .CurrentPage 1}}"
           hx-target="#feed-list"
           hx-push-url="true"
           onclick="delayedSmoothScroll('#page-title')">
           Previous
        </a>
        <a class="pagination-next"
           {{if ge .CurrentPage .TotalPages}}disabled{{end}}
           hx-get="/feeds?page={{add .CurrentPage 1}}"
           hx-target="#feed-list" 
           hx-push-url="true"
           onclick="delayedSmoothScroll('#page-title')">
           Next
        </a>
        <ul class="pagination-list">
            {{range .Pages}}
            <li>
                <a class="pagination-link {{if eq . $.CurrentPage}}is-current{{end}}"
                   hx-get="/feeds?page={{.}}"
                   hx-target="#feed-list"
                   hx-push-url="true"
                   onclick="delayedSmoothScroll('#page-title')">{{.}}</a>
            </li>
            {{end}}
        </ul>
    </div>
</div>
{{end}}
